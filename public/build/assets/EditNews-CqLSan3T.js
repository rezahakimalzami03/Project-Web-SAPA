import{r as i,j as e,Y as g}from"./app-C_JMMjm2.js";import{N as b}from"./Navbar-BHcEPdVM.js";import{d as N}from"./index-B6r66yOR.js";import{S as l}from"./sweetalert2.all-BEkRWzO2.js";function k(a){const[n,d]=i.useState(a.myNews.title||""),[r,m]=i.useState(a.myNews.description||""),[c,o]=i.useState(a.myNews.category||""),[u,x]=i.useState(null);i.useEffect(()=>{d(a.myNews.title),m(a.myNews.description),o(a.myNews.category)},[a.myNews]);const h=async()=>{if(a.auth.user===null){l.fire({title:"Oops!",text:"Anda harus login terlebih dahulu!",icon:"error"});return}if((await l.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin mengubah berita?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Kirim",cancelButtonText:"Batal"})).isConfirmed){const s=new FormData;s.append("id",a.myNews.id),n!==a.myNews.title&&s.append("title",n),r!==a.myNews.description&&s.append("description",r),c!==a.myNews.category&&s.append("category",c),u&&s.append("image",u);try{await N.Inertia.post("/news/update",s,{headers:{"Content-Type":"multipart/form-data"}}),l.fire({title:"Berhasil!",text:"Berita berhasil diperbaharui!",icon:"success"})}catch{l.fire({title:"Gagal!",text:"Terjadi kesalahan saat memperbarui berita.",icon:"error"})}}};return e.jsxs(e.Fragment,{children:[e.jsx(g,{title:a.title}),e.jsx(b,{user:a.auth.user}),e.jsx("div",{className:"py-12 bg-gray-400 h-full",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm p-6 mt-10 rounded-md",children:e.jsxs("div",{className:"bg-card p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-black",children:"Edit Data Pengajuan"}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"text-black",children:"Masukkan Judul Pengaduan"})}),e.jsx("input",{type:"text",placeholder:"Judul",className:"input input-bordered bg-white w-full",onChange:t=>d(t.target.value),value:n}),e.jsx("div",{className:"label",children:e.jsx("span",{className:"text-black",children:"Masukkan Deskripsi Pengaduan"})}),e.jsx("textarea",{placeholder:"Deskripsi",className:"bg-white border-gray-300 textarea textarea-bordered textarea-lg max-w-xl",onChange:t=>m(t.target.value),value:r}),e.jsx("div",{className:"label",children:e.jsx("span",{className:"text-black",children:"Masukkan Kategori Pengaduan"})}),e.jsx("input",{type:"text",placeholder:"Kategori",className:"input input-bordered w-full bg-white",onChange:t=>o(t.target.value),value:c}),e.jsxs("label",{className:"form-control max-w-lg my-2 ml-2",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"text-black",children:"Masukkan Gambar (Opsional)"})}),e.jsx("input",{type:"file",className:"file-input file-input-bordered max-w-xs",onChange:t=>x(t.target.files[0])})]}),e.jsx("button",{className:"btn btn-primary m-2",onClick:h,children:"UPDATE"})]})]})})})})]})}export{k as default};
